# Emotion Expression Analysis

This document provides information about the emotion expression analysis in rationales.


## Overview

The emotion expression analysis examines if the rationales in experiment results express the emotions they were assigned and investigates correlations with specific categories.

### Key Features

- Uses GPT-4o-mini for emotion detection in text
- **Parallel Processing** for significantly faster analysis of large datasets
- Provides statistical analysis of emotion expression rates by category
- Generates visualizations to compare expression rates
- Exports detailed results for further analysis


## Inputs

- **Input Data Format**: Describe the expected format of the input data that `result_analysis.rational_analysis` processes. (e.g., CSV/JSON file path, specific columns/fields expected).
- **Example Input**: (Optional, but helpful) A small snippet or description of an example input.

## Outputs

- **Generated Files**: Detail the files generated by the script.
  - `emotion_analysis_results.json`: (Describe structure and content)
  - `emotion_comparison_results.json`: (Describe structure and content, if different)
  - Visualization files (e.g., `anger_vs_neutral_expression.png`): (Describe what they represent)
- **Output Format/Schema**: For JSON/CSV files, provide a brief schema or example of the data structure.

## Performance Optimization

The analysis script uses parallel processing to significantly improve performance:

- Processes multiple items concurrently using thread pooling (default workers: TBD, configurable).
- Implements smart rate limiting to avoid API throttling (default rate limit: TBD, configurable).
- Displays a progress bar for real-time feedback.
- Configurable performance parameters (workers, rate limits) - *see Detailed Configuration below*.

## Data Size Control

For testing or limited analysis, the script can be configured to analyze only a subset of the data:

- By default, processes only the first 100 items (configurable).
- Easily adjustable limit by modifying a single line of code in `result_analysis.rational_analysis` (specify which line or if there's a parameter).
- Useful for preliminary analysis or when testing new features.

## Detailed Configuration & Customization

- **Command-line Arguments**: (If `result_analysis.rational_analysis` accepts any CLI arguments for configuration, list them here).
- **Configuration File**: (If the script uses a configuration file, describe its format and key options).
- **Performance Parameters**: 
  - `num_workers`: (Describe how to set the number of parallel workers, e.g., script variable, CLI argument).
  - `rate_limit_per_minute`: (Describe how to set the API rate limit, e.g., script variable, CLI argument).
- **Other Customizations**: (Any other ways the script can be customized).

## Running the Analysis

To run the analysis:

```bash
# Activate conda environment
conda activate llm

# Run the script
python -m result_analysis.rational_analysis
```

See the detailed documentation for more information about performance tuning, data size control, requirements, outputs, and customization options. 